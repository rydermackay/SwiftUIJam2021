//
//  Game.swift
//  MatchingGame
//
//  Created by Ryder Mackay on 2021-02-19.
//

import Foundation

class Card: ObservableObject {
    let animal: Character
    
    @Published
    var visible: Bool = false
    
    init(animal: Character) {
        self.animal = animal
    }
}

extension Card: Identifiable {
    var id: ObjectIdentifier {
        return ObjectIdentifier(self)
    }
}

class Game {
    
    enum Difficulty {
        case easy, medium, hard
        
        var numberOfCards: Int {
            switch self {
            case .easy:
                return 12
            case .medium:
                return 18
            case .hard:
                return 36
            }
        }
    }
    
    let difficulty: Difficulty
    
    let cards: [Card]
    
    init(difficulty: Difficulty) {
        self.difficulty = difficulty
        
        let possibleAnimals: [Character] = [
            "ğŸ¶","ğŸ±","ğŸ­","ğŸ¹","ğŸ°","ğŸ¦Š","ğŸ»","ğŸ¼","ğŸ»â€â„ï¸","ğŸ¨","ğŸ¯","ğŸ¦","ğŸ®","ğŸ·","ğŸ¸","ğŸµ","ğŸ”","ğŸ§","ğŸ¦","ğŸ¤","ğŸ¥","ğŸ¦…","ğŸ¦‰","ğŸ¦‡","ğŸº","ğŸ—","ğŸ´","ğŸ¦„","ğŸ","ğŸª±","ğŸ›","ğŸ¦‹","ğŸ","ğŸœ","ğŸª°","ğŸª²","ğŸ¦Ÿ","ğŸ¦—","ğŸ•·","ğŸ•¸","ğŸ¢","ğŸ","ğŸ¦","ğŸ¦–","ğŸ¦•","ğŸ¦‘","ğŸ¦","ğŸ¦","ğŸ¦€","ğŸ¡","ğŸ ","ğŸŸ","ğŸ¬","ğŸ³","ğŸ‹","ğŸ¦ˆ","ğŸ¦­","ğŸŠ","ğŸ…","ğŸ†","ğŸ¦“","ğŸ¦","ğŸ¦§","ğŸ¦£","ğŸ˜","ğŸ¦›","ğŸ¦","ğŸª","ğŸ«","ğŸ¦’","ğŸ¦˜","ğŸ¦¬","ğŸƒ","ğŸ‚","ğŸ„","ğŸ","ğŸ–","ğŸ","ğŸ‘","ğŸ¦™","ğŸ","ğŸ¦Œ","ğŸ•","ğŸ©","ğŸ¦®","ğŸ•â€ğŸ¦º","ğŸˆ","ğŸˆâ€â¬›","ğŸ“","ğŸ¦ƒ","ğŸ¦¤","ğŸ¦š","ğŸ¦¢","ğŸ¦©","ğŸ•Š","ğŸ‡","ğŸ¦","ğŸ¦¨","ğŸ¦«","ğŸ¦¦","ğŸ¦¥","ğŸ","ğŸ€","ğŸ¿","ğŸ¦”","ğŸ‰","ğŸ²"
        ]
        
        // add pairs of cards
        var animals: [Character] = []
        while animals.count < difficulty.numberOfCards,
              let animal = possibleAnimals.randomElement(),
              !animals.contains(animal) {
            animals.append(animal)
            animals.append(animal)
        }
        animals.shuffle()
        
        cards = animals.map(Card.init(animal:))
    }
    
}
